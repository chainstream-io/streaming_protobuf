syntax = "proto3";

package io.chainstream.v1.dex.trade;

import "common/common.proto";

enum TokenPriceSuspectReason {
  TOKEN_PRICE_SUSPECT_REASON_UNSPECIFIED = 0;
  TOKEN_PRICE_SUSPECT_REASON_BY_LAST_CLOSE_PRICES = 1;
  TOKEN_PRICE_SUSPECT_REASON_BY_SMALL_AMOUNT_IN_USD = 2;
  TOKEN_PRICE_SUSPECT_REASON_BY_BIG_PRICE = 3;
  TOKEN_PRICE_SUSPECT_REASON_BY_CONSTANT_PRODUCT_FORMULA = 4;
  TOKEN_PRICE_SUSPECT_REASON_BY_POOL_PRICE_IMPACT = 5;
  TOKEN_PRICE_SUSPECT_REASON_BY_SMALL_AMOUNT_IN_USD_AND_POOL_PRICE_IMPACT = 6;
}

message TradeProcessed {
  string token_a_price_in_quote = 1;
  string token_a_price_in_usd = 2;
  string token_a_price_in_native = 3;
  string token_b_price_in_base = 4;
  string token_b_price_in_usd = 5;
  string token_b_price_in_native = 6;

  bool is_token_a_price_in_usd_suspect = 101;
  TokenPriceSuspectReason is_token_a_price_in_usd_suspect_reason = 102;

  string token_a_price_in_usd_lasted = 200;
  string token_a_price_in_native_lasted = 201;

  string token_b_price_in_usd_lasted = 210;
  string token_b_price_in_native_lasted = 211;

}