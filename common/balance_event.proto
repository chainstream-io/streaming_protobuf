syntax = "proto3";

package io.chainstream.v1.balance;

import "common/common.proto";

import "common/balance_processed_event.proto";

enum AccountLifecycle {
  ACCOUNT_LIFECYCLE_UNSPECIFIED = 0;
  ACCOUNT_LIFECYCLE_NEW         = 1;
  ACCOUNT_LIFECYCLE_EXISTING    = 2;
  ACCOUNT_LIFECYCLE_CLOSED      = 3;
}

message BalanceEvents {
  repeated BalanceEvent events = 1;
}

message Balance {
  string token_account_address = 1;
  string account_owner_address = 2;
  string token_address = 3;
  string pre_amount = 4;
  string post_amount = 5;
  optional uint32 decimals = 6;

  AccountLifecycle lifecycle = 100;
}

message BalanceEvent {
  io.chainstream.v1.common.Instruction instruction = 1;
  io.chainstream.v1.common.Block block = 2;
  io.chainstream.v1.common.Transaction transaction = 3;
  io.chainstream.v1.common.DApp d_app = 4;

  Balance balance = 100;
  BalanceProcessed balance_processed = 200;
}
